-- AnimatorToggle.lua
-- Usage: set Key = "F" before calling loadstring

-- Key must be defined before loadstring executes
local key = Key or "F"  -- defaults to F if Key not set

local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

local animatorDeleted = false

local function toggleAnimator()
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end

    if not animatorDeleted then
        -- Delete Animator
        local animator = humanoid:FindFirstChildOfClass("Animator")
        if animator then
            animator:Destroy()
            animatorDeleted = true
        end
    else
        -- Restore Animator
        if not humanoid:FindFirstChildOfClass("Animator") then
            local newAnimator = Instance.new("Animator")
            newAnimator.Parent = humanoid
            animatorDeleted = false
        end
    end
end

-- Listen for the key press
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode[key:upper()] then
        toggleAnimator()
    end
end)
