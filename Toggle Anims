-- LocalScript from GitHub
local key = Key  -- relies on external Key variable
local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

local animatorDeleted = false

local function toggleAnimator()
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end

    if not animatorDeleted then
        local animator = humanoid:FindFirstChildOfClass("Animator")
        if animator then
            animator:Destroy()
            animatorDeleted = true
        end
    else
        if not humanoid:FindFirstChildOfClass("Animator") then
            local newAnimator = Instance.new("Animator")
            newAnimator.Parent = humanoid
            animatorDeleted = false
        end
    end
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode[key] then
        toggleAnimator()
    end
end)
